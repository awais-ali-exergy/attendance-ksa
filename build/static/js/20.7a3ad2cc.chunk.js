(this.webpackJsonpTheia=this.webpackJsonpTheia||[]).push([[20],{794:function(e,t,a){},898:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(9),c=(a(794),a(793)),s=a(59),d=a.n(s),i=a(103),l=a(36),o=(a(104),a(801)),m=(a(802),a(803),a(797)),O=a.n(m),j=a(5),b=(a(881),a(877),a(2));t.default=()=>{const[e,t]=Object(n.useState)(!1),[a,s]=Object(n.useState)(""),[m,u]=Object(n.useState)(""),y=Object(r.f)();let h=Object(r.g)(),p=parseInt(h.id);isNaN(p)&&(p=0);const{t:S}=Object(c.a)(),[T,U]=Object(n.useState)([]),[B,f]=Object(n.useState)([]),[A,I]=Object(n.useState)(new Date),[w,g]=Object(n.useState)(new Date),[x,D]=Object(n.useState)(new Date),[N,E]=Object(n.useState)({userId:"",data:[]}),[v,k]=Object(n.useState)(""),[C,M]=Object(n.useState)([]),[F,G]=Object(n.useState)({userdate:"",createdOnDateByUser:"",createdOnTimeByUser1:"",createdOnTimeByUser2:"",usertime:"",attendanceTypeId:"",userId:"",userName:""}),H=async()=>{console.log(N,"Final Data is coming");var e=new Headers;e.append("Authorization","Bearer "+window.localStorage.getItem("AtouBeatXToken"));var t=new FormData;t.append("userId",N.userId);for(let n=0;n<N.data.length;n++)console.log(N.data[n].createdOnDateByUser),t.append("createdOnDateByUser",N.data[n].createdOnDateByUser),t.append("createdOnTimeByUser",N.data[n].createdOnTimeByUser),t.append("attendanceTypeId",N.data[n].attendanceTypeId);console.log(t);var a={method:"POST",headers:e,body:t,redirect:"follow"};await fetch("".concat("http://35.179.98.1:8081").concat("/AMS","/Attendances/SaveManual"),a).then((e=>e.json())).then((e=>{console.log(e,"result is coming"),1===e.SUCCESS?(E({userId:"",data:[]}),M([]),Object(l.b)(e.USER_MESSAGE)):Object(l.b)(e.USER_MESSAGE)})).catch((e=>{Object(l.b)("Failed to fetch ! Please try Again later")}))};Object(n.useEffect)((()=>{(async e=>{if(0!==e){var t=new Headers;t.append("Authorization","Bearer "+window.localStorage.getItem("AtouBeatXToken"));var a=new FormData;a.append("id",e);var n={method:"POST",headers:t,body:a,redirect:"follow"};await fetch("".concat("http://35.179.98.1:8081").concat("/AMS","/Attendances/GetManualByIdAndFirm"),n).then((e=>e.json())).then((e=>{if(1===e.SUCCESS){let t=e.DATA;t&&(G({userdate:t.createdOnDateByUser,usertime:t.createdOnTimeByUser,attendanceTypeId:t.attendanceTypeId,userId:t.userId}),g(d()(t.createdOnByUserTimeDisplay,"hh:mm a").format("HH:mm")),D(new Date(t.createdOnDateByUser))),Object(l.b)(e.USER_MESSAGE)}else Object(l.b)(e.USER_MESSAGE)})).catch((e=>{Object(l.b)("Failed to fetch ! Please try Again later")}))}})(p),(async()=>{var e=new Headers;e.append("Authorization","Bearer "+window.localStorage.getItem("AtouBeatXToken"));var t={method:"POST",headers:e,body:new FormData,redirect:"follow"};await fetch("".concat("http://35.179.98.1:8081").concat("/AMS","/Attendances/GetUsersDropdownByFirm"),t).then((e=>e.json())).then((e=>{if(1===e.SUCCESS){let t=e.DATA;t&&U(t),Object(l.b)(e.USER_MESSAGE)}else Object(l.b)(e.USER_MESSAGE)})).catch((e=>{Object(l.b)("Failed to fetch ! Please try Again later")}))})(),(async()=>{var e=new Headers;e.append("Authorization","Bearer "+window.localStorage.getItem("AtouBeatXToken"));var t={method:"POST",headers:e,body:new FormData,redirect:"follow"};await fetch("".concat("http://35.179.98.1:8081").concat("/AMS","/Attendances/GetAttendanceTypesDropdown"),t).then((e=>e.json())).then((e=>{if(1===e.SUCCESS){Object(l.b)(e.USER_MESSAGE);let t=e.DATA;t&&f(t)}else Object(l.b)(e.USER_MESSAGE)})).catch((e=>{Object(l.b)("Failed to fetch ! Please try Again later")}))})()}),[]);const R=e=>{const{name:t,value:a}=e.target;if(G({...F,[t]:a}),"userId"===t){const n=T.find((t=>String(t.id)===String(e.target.value)));G({...F,userName:n.label,[t]:a})}},P=Object(n.useMemo)((()=>[{headerName:"Employee Name",field:"userName"},{headerName:"Attendance Date",field:"userdate"},{headerName:"Clock In Time",field:"createdOnTimeByUser1"},{headerName:"Clock Out Time",field:"createdOnTimeByUser2"}]),[]);return Object(b.jsxs)(n.Fragment,{children:[Object(b.jsx)(l.a,{}),Object(b.jsxs)(j.s,{id:"attForm",onSubmit:()=>H(),children:[Object(b.jsxs)(j.B,{children:[Object(b.jsxs)(j.o,{md:"6",className:"mb-1",children:[Object(b.jsx)(j.w,{className:"form-label",children:S("Select Employee")}),Object(b.jsxs)(j.t,{type:"select",id:"userId",name:"userId",value:F.userId,disabled:F.userId,onChange:R,placeholder:"Select Employee",children:[Object(b.jsx)("option",{}),T&&T.length>0?T.map(((e,t)=>Object(b.jsx)("option",{value:e.id,children:e.label},e.id))):null]})]}),Object(b.jsxs)(j.o,{md:"6",className:"mb-1",children:[Object(b.jsx)(j.w,{className:"form-label",for:"date-time-picker",children:"Attendance Date"}),Object(b.jsx)(O.a,{value:F.createdOnDateByUser,name:"createdOnDateByUser",dateFormat:"Y-m-d",id:"date-time-picker",className:"form-control",onChange:e=>(e=>{const t=e[0];D(t);const a=d()(t).format("DD/MM/YYYY");G({...F,userdate:a})})(e)})]})]}),Object(b.jsxs)(j.B,{children:[Object(b.jsxs)(j.o,{md:"6",className:"mb-1",children:[Object(b.jsx)(j.w,{className:"form-label",for:"date-time-picker",children:"Clock In Time"}),Object(b.jsx)(j.t,{value:F.createdOnTimeByUser1,type:"time",name:"createdOnTimeByUser1",id:"time-picker-clockIn",className:"form-control",onChange:e=>R(e)})]}),Object(b.jsxs)(j.o,{md:"6",className:"mb-1",children:[Object(b.jsx)(j.w,{className:"form-label",for:"date-time-picker",children:"Clock Out Time"}),Object(b.jsx)(j.t,{value:F.createdOnTimeByUser2,type:"time",name:"createdOnTimeByUser2",id:"time-picker",className:"form-control",onChange:e=>R(e)})]})]}),Object(b.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(b.jsx)(j.e,{color:"secondary",className:"btn-prev",outline:!0,onClick:()=>{y("/ViewAllAttendanceData")},children:Object(b.jsx)("span",{className:"align-middle d-sm-inline-block d-none",children:"View"})}),Object(b.jsx)(j.e,{onClick:()=>{(()=>{const e=d()(F.createdOnTimeByUser1,"HH:mm:ss").format("hh:mm a"),t=d()(F.createdOnTimeByUser2,"HH:mm:ss").format("hh:mm a");let a={userdate:F.userdate,createdOnDateByUser:F.createdOnDateByUser,createdOnTimeByUser1:e,createdOnTimeByUser2:t,usertime:F.usertime,attendanceTypeId:F.attendanceTypeId,userId:F.userId,userName:F.userName};if(M([...C,a]),""!==F.createdOnTimeByUser1)if(""!==F.createdOnTimeByUser2){let e=[{createdOnDateByUser:a.userdate,attendanceTypeId:1,createdOnTimeByUser:a.createdOnTimeByUser1},{createdOnDateByUser:a.userdate,attendanceTypeId:2,createdOnTimeByUser:a.createdOnTimeByUser2}];E({userId:a.userId,data:[...N.data,...e]})}else{let e={createdOnDateByUser:a.userdate,attendanceTypeId:1,createdOnTimeByUser:a.createdOnTimeByUser1};E({userId:a.userId,data:[...N.data,e]})}else{let e={createdOnDateByUser:a.userdate,attendanceTypeId:2,createdOnTimeByUser:a.createdOnTimeByUser2};E({userId:a.userId,data:[...N.data,e]})}G({userdate:"",createdOnDateByUser:"",createdOnTimeByUser1:"",createdOnTimeByUser2:"",usertime:"",attendanceTypeId:"",userId:F.userId,userName:F.userName})})()},color:"primary",className:"btn-next",children:Object(b.jsx)("span",{className:"align-middle d-sm-inline-block d-none",children:"Add"})})]}),0!==C.length?Object(b.jsxs)("div",{style:{marginTop:"50px"},children:[Object(b.jsx)("div",{className:"ag-theme-quartz",style:{height:"500px",width:"100%",display:"flex",justifyContent:"space-evenly",flexDirection:"column"},children:Object(b.jsx)(o.AgGridReact,{columnDefs:P,rowData:C,pagination:!0})}),Object(b.jsx)("div",{className:"d-flex justify-content-end",style:{marginTop:"20px"},children:Object(b.jsx)(j.e,{color:"primary",className:"btn-next",onClick:()=>H(),children:Object(b.jsx)("span",{className:"align-middle d-sm-inline-block d-none",children:0!==p?"Update":"Save"})})})]}):null]}),Object(b.jsx)(i.a,{isOpen:e,message:a,severity:m,handleCloseAlert:()=>{var e;"clickaway"!==e&&t(!1)}})]})}}}]);
//# sourceMappingURL=20.7a3ad2cc.chunk.js.map