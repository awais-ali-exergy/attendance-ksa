{"version":3,"sources":["views/pages/LeaveReport/LeaveReport.js"],"names":["styles","bgHeading","background","color","padding","textAlign","btnStyle","border","borderRadius","btnSpacing","display","justifyContent","alignItems","flexDirection","pad_Col","LeaveReport","isOpenAlert","setIsOpenAlert","useState","alertMessage","setAlertMessage","alertSeverity","setAlertSeverity","leaves","setleaves","useEffect","async","fetch","concat","process","method","headers","Authorization","window","localStorage","getItem","redirect","then","response","status","json","result","console","log","SUCCESS","toast","USER_MESSAGE","DATA","catch","error","getAllLeave","columnDefs","useMemo","headerName","field","sortable","filter","floatingFilter","cellRenderer","params","_jsxs","style","children","_jsx","onClick","navigateToEdit","data","className","MdModeEdit","size","marginLeft","deleteLeave","item","id","MdDelete","_Fragment","ToastContainer","height","width","AgGridReact","rowData","pagination","paginationPageSize","paginationAutoPageSize","suppressPaginationPanel","animateRows","defaultColDef","resizable","CustomAlert","isOpen","message","severity","handleCloseAlert","reason"],"mappings":"iGAAA,qFAUA,MAAMA,EAAS,CACbC,UAAW,CACTC,WAAY,UACZC,MAAO,QACPC,QAAS,OACTC,UAAW,UAEbC,SAAU,CACRC,OAAQ,OACRH,QAAS,WACTF,WAAY,UACZC,MAAO,QACPK,aAAc,QAEhBC,WAAY,CACVC,QAAS,OACTC,eAAgB,eAChBC,WAAY,SACZC,cAAe,QAEjBC,QAAS,CACPV,QAAS,OACTC,UAAW,WAgNAU,UA7MKA,KAClB,MAAOC,EAAaC,GAAkBC,oBAAS,IACxCC,EAAcC,GAAmBF,mBAAS,KAC1CG,EAAeC,GAAoBJ,mBAAS,KAY5CK,EAAQC,GAAaN,mBAAS,IAmFrCO,qBAAU,KAlFUC,iBAEZC,MAAM,GAADC,OACNC,2BAAgCD,OAAGC,OAAkC,wBACxE,CACEC,OAAQ,OACRC,QAAS,CACPC,cACE,UAAYC,OAAOC,aAAaC,QAAQ,mBAE5CC,SAAU,WAGXC,MAAMC,IACDA,EAASC,OAGND,EAASE,UAEjBH,MAAMI,IACLC,QAAQC,IAAIF,GACW,IAAnBA,EAAOG,SACTC,YAAMJ,EAAOK,cACbtB,EAAUiB,EAAOM,OAEjBF,YAAMJ,EAAOK,aAEf,IAEDE,OAAOC,IACNJ,YAAM,2CAA2C,GAEjD,EAmDJK,EAAa,GACZ,IAEH,MAAMC,EAAaC,mBACjB,IAAM,CACJ,CACEC,WAAY,gBACZC,MAAO,YACPC,UAAU,EACVC,QAAQ,EACRC,gBAAgB,GAElB,CACEJ,WAAY,aACZC,MAAO,sBACPC,UAAU,EACVC,QAAQ,EACRC,gBAAgB,GAElB,CACEJ,WAAY,aACZC,MAAO,qBACPC,UAAU,EACVC,QAAQ,EACRC,gBAAgB,GAElB,CACEJ,WAAY,WACZC,MAAO,mBACPC,UAAU,EACVC,QAAQ,EACRC,gBAAgB,GAElB,CACEJ,WAAY,eACZC,MAAO,cACPC,UAAU,EACVC,QAAQ,EACRC,gBAAgB,GAElB,CACEJ,WAAY,SACZK,aAAeC,GACbC,eAAA,OAAKC,MAAO7D,EAAOS,WAAWqD,SAAA,CAC5BC,cAAA,UACEC,QAASA,IAAMC,eAAeN,EAAOO,MACrCC,UAAU,GACVN,MAAO7D,EAAOM,SAASwD,SAEvBC,cAACK,IAAU,CAACC,KAAM,OAEpBN,cAAA,UACEF,MAAO,IAAK7D,EAAOM,SAAUgE,WAAY,OACzCN,QAASA,IAAMO,YAAYC,KAAKC,IAAIX,SAEpCC,cAACW,IAAQ,CAACL,KAAM,aAM1B,IAEF,OACET,eAAAe,WAAA,CAAAb,SAAA,CACEC,cAACa,IACD,IAEAb,cAAA,OAAKI,UAAU,mBAAkBL,SAC/BC,cAAA,OACEI,UAAU,kBACVN,MAAO,CACLgB,OAAQ,QACRC,MAAO,OACPpE,QAAS,OACTC,eAAgB,eAChBE,cAAe,UACfiD,SAEFC,cAACgB,cAAW,CACV5B,WAAYA,EACZ6B,QAASzD,EACT0D,YAAY,EACZC,mBAAoB,GACpBC,wBAAwB,EACxBC,yBAAyB,EACzBC,aAAa,EACbC,cAAe,CACb/B,UAAU,EACVgC,WAAW,EACX/B,QAAQ,SAMhBO,cAACyB,IAAW,CACVC,OAAQzE,EACR0E,QAASvE,EACTwE,SAAUtE,EACVuE,iBAAkBA,KA9LCA,IAAQC,EAChB,cAAXA,GAGJ5E,GAAe,EA0LgC,MAE5C,C","file":"static/js/35.f6071232.chunk.js","sourcesContent":["import React, { useState, useEffect, useMemo } from \"react\";\r\nimport { MdModeEdit } from \"react-icons/md\";\r\nimport { MdDelete } from \"react-icons/md\";\r\nimport { AgGridReact } from \"ag-grid-react\";\r\nimport \"ag-grid-community/styles/ag-grid.css\";\r\nimport \"ag-grid-community/styles/ag-theme-quartz.css\";\r\nimport CustomAlert from \"../../components/alerts/CustomAlert\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nconst styles = {\r\n  bgHeading: {\r\n    background: \"#10a945\",\r\n    color: \"white\",\r\n    padding: \"30px\",\r\n    textAlign: \"center\",\r\n  },\r\n  btnStyle: {\r\n    border: \"none\",\r\n    padding: \"0px 14px\",\r\n    background: \"#10a945\",\r\n    color: \"white\",\r\n    borderRadius: \"10px\",\r\n  },\r\n  btnSpacing: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-evenly\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"item\",\r\n  },\r\n  pad_Col: {\r\n    padding: \"15px\",\r\n    textAlign: \"center\",\r\n  },\r\n};\r\nconst LeaveReport = () => {\r\n  const [isOpenAlert, setIsOpenAlert] = useState(false);\r\n  const [alertMessage, setAlertMessage] = useState(\"\");\r\n  const [alertSeverity, setAlertSeverity] = useState(\"\");\r\n  const handleOpenAlert = (msg, severity) => {\r\n    setIsOpenAlert(true);\r\n    setAlertMessage(msg);\r\n    setAlertSeverity(severity);\r\n  };\r\n  const handleCloseAlert = (event, reason) => {\r\n    if (reason === \"clickaway\") {\r\n      return;\r\n    }\r\n    setIsOpenAlert(false);\r\n  };\r\n  const [leaves, setleaves] = useState([]);\r\n  const getAllLeave = async () => {\r\n    // setIsLoading(true);\r\n    await fetch(\r\n      `${process.env.REACT_APP_API_DOMAIN}${process.env.REACT_APP_SUB_API_NAME}/Leaves/GetAllByFirm`,\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization:\r\n            \"Bearer \" + window.localStorage.getItem(\"AtouBeatXToken\"),\r\n        },\r\n        redirect: \"follow\",\r\n      }\r\n    )\r\n      .then((response) => {\r\n        if (response.status === 401) {\r\n          // <Logout />;\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((result) => {\r\n        console.log(result);\r\n        if (result.SUCCESS === 1) {\r\n          toast(result.USER_MESSAGE);\r\n          setleaves(result.DATA);\r\n        } else {\r\n          toast(result.USER_MESSAGE);\r\n          // handleOpenAlert(<span>{result.USER_MESSAGE}.</span>, \"danger\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        toast(\"Failed to fetch ! Please try Again later\");\r\n        // handleOpenAlert(<span>Failed to fetch ! Please try Again later.</span>, \"danger\");\r\n      });\r\n    // setIsLoading(false);\r\n  };\r\n  //   const editleave = (id) => {\r\n  //     window.location.replace(\"#/MainDashboard/BasicLeave/\" + id);\r\n  //   };\r\n  //   const deleteLeave = async (id) => {\r\n  //     var myHeaders = new Headers();\r\n  //     myHeaders.append(\r\n  //       \"Authorization\",\r\n  //       \"Bearer \" + window.localStorage.getItem(\"AtouBeatXToken\")\r\n  //     );\r\n\r\n  //     var formdata = new FormData();\r\n  //     formdata.append(\"id\", id);\r\n\r\n  //     var requestOptions = {\r\n  //       method: \"POST\",\r\n  //       headers: myHeaders,\r\n  //       body: formdata,\r\n  //       redirect: \"follow\",\r\n  //     };\r\n\r\n  //     await fetch(\r\n  //       `${process.env.REACT_APP_API_DOMAIN}${process.env.REACT_APP_SUB_API_NAME}/Leaves/DeleteByIdAndFirm`,\r\n  //       requestOptions\r\n  //     )\r\n  //       .then((response) => {\r\n  //         if (response.status === 401) {\r\n  //           <Logout />;\r\n  //         }\r\n  //         return response.json();\r\n  //       })\r\n  //       .then((result) => {\r\n  //         if (result.SUCCESS === 1) {\r\n  //           //   handleOpenSnackbar(<span>{result.USER_MESSAGE}</span>, \"success\");\r\n\r\n  //           window.location.reload();\r\n  //         } else {\r\n  //           //   handleOpenSnackbar(<span>{result.USER_MESSAGE}</span>, \"error\");\r\n  //         }\r\n  //       })\r\n  //       .catch((error) => {\r\n  //         console.log(\"error\", error);\r\n  //         // handleOpenSnackbar(\r\n  //         //   \"Failed to fetch ! Please try Again later.\",\r\n  //         //   \"error\"\r\n  //         // );\r\n  //       });\r\n  //   };\r\n  useEffect(() => {\r\n    getAllLeave();\r\n  }, []);\r\n\r\n  const columnDefs = useMemo(\r\n    () => [\r\n      {\r\n        headerName: \"Employee Name\",\r\n        field: \"userLabel\",\r\n        sortable: true,\r\n        filter: true,\r\n        floatingFilter: true,\r\n      },\r\n      {\r\n        headerName: \"Leave Type\",\r\n        field: \"attendanceTypeLabel\",\r\n        sortable: true,\r\n        filter: true,\r\n        floatingFilter: true,\r\n      },\r\n      {\r\n        headerName: \"Start Date\",\r\n        field: \"startOnDateDisplay\",\r\n        sortable: true,\r\n        filter: true,\r\n        floatingFilter: true,\r\n      },\r\n      {\r\n        headerName: \"End Date\",\r\n        field: \"endOnDateDisplay\",\r\n        sortable: true,\r\n        filter: true,\r\n        floatingFilter: true,\r\n      },\r\n      {\r\n        headerName: \"Leave Reason\",\r\n        field: \"leaveReason\",\r\n        sortable: true,\r\n        filter: true,\r\n        floatingFilter: true,\r\n      },\r\n      {\r\n        headerName: \"Action\",\r\n        cellRenderer: (params) => (\r\n          <div style={styles.btnSpacing}>\r\n            <button\r\n              onClick={() => navigateToEdit(params.data)}\r\n              className=\"\"\r\n              style={styles.btnStyle}\r\n            >\r\n              <MdModeEdit size={20} />\r\n            </button>\r\n            <button\r\n              style={{ ...styles.btnStyle, marginLeft: \"8px\" }}\r\n              onClick={() => deleteLeave(item.id)}\r\n            >\r\n              <MdDelete size={25} />\r\n            </button>\r\n          </div>\r\n        ),\r\n      },\r\n    ],\r\n    []\r\n  );\r\n  return (\r\n    <>\r\n      <ToastContainer\r\n      // toastStyle={{ backgroundColor: \"#10a945\", color: \"white\" }}\r\n      />\r\n      <div className=\"table-responsive\">\r\n        <div\r\n          className=\"ag-theme-quartz\"\r\n          style={{\r\n            height: \"500px\",\r\n            width: \"100%\",\r\n            display: \"flex\",\r\n            justifyContent: \"space-evenly\",\r\n            flexDirection: \"column\",\r\n          }}\r\n        >\r\n          <AgGridReact\r\n            columnDefs={columnDefs}\r\n            rowData={leaves}\r\n            pagination={true}\r\n            paginationPageSize={10}\r\n            paginationAutoPageSize={true}\r\n            suppressPaginationPanel={true}\r\n            animateRows={true}\r\n            defaultColDef={{\r\n              sortable: true,\r\n              resizable: true,\r\n              filter: true,\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <CustomAlert\r\n        isOpen={isOpenAlert}\r\n        message={alertMessage}\r\n        severity={alertSeverity}\r\n        handleCloseAlert={() => handleCloseAlert()}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LeaveReport;\r\n"],"sourceRoot":""}